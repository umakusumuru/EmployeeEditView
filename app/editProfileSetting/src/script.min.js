/*
 kaakateeyaangularapplication 2017-03-15 
*/
!function(angular){"use strict";function controller(editProfileSettingModel,scope){var vm=this;vm.init=function(){vm.model=editProfileSettingModel,vm.model.scope=scope},vm.init()}angular.module("KaakateeyaEmpEdit").controller("editProfileSettingCtrl",controller),controller.$inject=["editProfileSettingModel","$scope"]}(angular),function(angular){"use strict";function factory(editProfileSettingService,authSvc,alertss,commonFactory,uibModal){var model={};model.scope={};var logincustid=authSvc.getCustId(),custID=void 0!==logincustid&&null!==logincustid&&""!==logincustid?logincustid:null;return model.profileSettingArr=[],model.ConfidentialArr=[],model.profileDisplayArr=[],model.gradeSelectionArr=[],model.psObj={},model.csObj={},model.psdObj={},model.gradeObj={},model.init=function(){return model.pageload(),model},model.pageload=function(){editProfileSettingService.getProfileSettingData(custID).then(function(response){response.data.length>0&&(model.profileSettingArr=response.data[0].length>0?JSON.parse(response.data[0]):[],model.ConfidentialArr=response.data[1].length>0?JSON.parse(response.data[1]):[],model.profileDisplayArr=response.data[2].length>0?JSON.parse(response.data[2]):[],model.gradeSelectionArr=void 0!==response.data[3]&&response.data[3].length>0?JSON.parse(response.data[3]):[],console.log(model.ConfidentialArr))})},model.populategrade=function(item){return"A"===item?"216":"B"===item?"217":"C"===item?"218":"D"===item?"219":0},model.showprofilepopup=function(type,item){switch(type){case"profileSetting":void 0!==item&&(model.psObj.rdlapplicationstatus=item.ProfileStatusID,model.psObj.txtnoofdaysinactive=item.NoofDaysinactivated,model.psObj.txtreasonforinactive=item.Reason4InActive,model.psObj.ddlrequestedby=item.RequestedByGenericID,model.psObj.rdlprofilegrade=item.ProfileGradeID),commonFactory.open("profileSettingContent.html",model.scope,uibModal);break;case"profileDisplay":void 0!==item&&(model.psdObj.rdldisplayin=item.ProfileDisplayNameID,model.psdObj.rdlpwdblock=item.LoginStatusNameID,model.psdObj.txtblockedreason=item.ProfileBlockReason),commonFactory.open("profileDisplayContent.html",model.scope,uibModal);break;case"confidential":model.csObj.chkisconfidential=item.ConfindentialStatusID===!0,model.csObj.chkvryhighconfidential=1===item.HighConfidentialStatusID,commonFactory.open("confidentialContent.html",model.scope,uibModal);break;case"grading":void 0!==item&&(model.gradeObj.ddlfamilyGrade=model.populategrade(item.FamilyGrade),model.gradeObj.ddlphotoGrade=model.populategrade(item.PhotoGrade),model.gradeObj.ddlEducationgrade=model.populategrade(item.EducationGrade),model.gradeObj.ddlProfessionGrade=model.populategrade(item.ProfileGrade),model.gradeObj.ddlpropertyGrade=model.populategrade(item.PropertyGrade)),commonFactory.open("gradeSelectionContent.html",model.scope,uibModal)}},model.cancel=function(){commonFactory.closepopup()},model.gradeSubmit=function(obj){model.Mobj={CustID:custID,EmpID:"2",GFamily:obj.ddlfamilyGrade,GPhotos:obj.ddlphotoGrade,GEducation:obj.ddlEducationgrade,GProfession:obj.ddlProfessionGrade,GProperty:obj.ddlpropertyGrade},editProfileSettingService.submitGradeData(model.Mobj).then(function(response){console.log(response),commonFactory.closepopup(),1===response.data?(model.pageload(),alertss.timeoutoldalerts(model.scope,"alert-success","submitted Succesfully",4500)):alertss.timeoutoldalerts(model.scope,"alert-danger","Updation failed",4500)})},model.profileSettingAndDispalySubmit=function(IProfileDisplayName,ILoginStatusName,IBlockedreason,ITypeofReport,Icurrentprofilestatusid,Iprofilegrade,INoofDaysinactivated,IReason4InActive,IRequestedBy){model.Mobj={intCusID:custID,EmpID:"2",currentprofilestatusid:Icurrentprofilestatusid,profilegrade:Iprofilegrade,NoofDaysinactivated:INoofDaysinactivated,Reason4InActive:IReason4InActive,RequestedBy:55===Icurrentprofilestatusid||"55"===Icurrentprofilestatusid?IRequestedBy:null,TypeofReport:ITypeofReport,ProfileDisplayName:IProfileDisplayName,LoginStatusName:ILoginStatusName,Admin:null,Blockedreason:IBlockedreason},editProfileSettingService.submitProfileSettingAndDispalyData(model.Mobj).then(function(response){console.log(response),commonFactory.closepopup(),1===response.data?(model.pageload(),alertss.timeoutoldalerts(model.scope,"alert-success","submitted Succesfully",4500)):alertss.timeoutoldalerts(model.scope,"alert-danger","Updation failed",4500)})},model.profileSettingSubmit=function(obj){model.profileSettingAndDispalySubmit("","","","ProfileSettings",obj.rdlapplicationstatus,obj.rdlprofilegrade,obj.txtnoofdaysinactive,obj.txtreasonforinactive,obj.ddlrequestedby)},model.profileSettingDisplaySubmit=function(obj){model.profileSettingAndDispalySubmit(obj.rdldisplayin,obj.rdlpwdblock,obj.txtblockedreason,"DisplaySettings")},model.getChkVals=function(val){return val===!0?1:0},model.confidentialSubmit=function(obj){editProfileSettingService.confidentialSubmit(custID,model.getChkVals(obj.chkisconfidential),model.getChkVals(obj.chkvryhighconfidential),"2").then(function(response){console.log(response),commonFactory.closepopup(),void 0!=response.data&&response.data.length>0?1===JSON.parse(response.data[0])[0].STATUS&&(model.pageload(),alertss.timeoutoldalerts(model.scope,"alert-success","submitted Succesfully",4500)):alertss.timeoutoldalerts(model.scope,"alert-danger","Updation failed",4500)})},model.init()}angular.module("KaakateeyaEmpEdit").factory("editProfileSettingModel",factory),factory.$inject=["editProfileSettingService","authSvc","alert","commonFactory","$uibModal"]}(angular),function(angular){"use strict";function factory(http){return{getProfileSettingData:function(obj){return http.get(editviewapp.apipath+"CustomerPersonal/getCustomerprofilesettingDetails",{params:{CustID:obj}})},submitGradeData:function(obj1){return http.post(editviewapp.apipath+"CustomerPersonalUpdate/CustomerProfileSetting_Gradeselection",JSON.stringify(obj1))},submitProfileSettingAndDispalyData:function(obj1){return http.post(editviewapp.apipath+"CustomerPersonalUpdate/CustomerProfileSetting_ProfileSetting",JSON.stringify(obj1))},confidentialSubmit:function(custid,confidential,Hconfidential,empid){return http.get(editviewapp.apipath+"CustomerPersonal/getCustomerPersonaloffice_purpose",{params:{flag:"7",ID:custid,AboutProfile:empid,IsConfidential:confidential,HighConfendential:Hconfidential}})}}}angular.module("KaakateeyaEmpEdit").factory("editProfileSettingService",factory),factory.$inject=["$http"]}(angular);