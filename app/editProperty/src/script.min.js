/*
 kaakateeyaangularapplication 2017-03-15 
*/
!function(angular){"use strict";function controller(editPropertyModel,scope){var vm=this;vm.init=function(){vm.model=editPropertyModel,vm.model.scope=scope},vm.init()}angular.module("KaakateeyaEmpEdit").controller("editPropertyCtrl",controller),controller.$inject=["editPropertyModel","$scope"]}(angular),function(angular){"use strict";function factory(editPropertyService,authSvc,alertss,commonFactory,uibModal){var model={};model.scope={},model.propertyArr=[],model.proObj={};var isSubmit=!0,logincustid=authSvc.getCustId(),custID=model.CustID=void 0!==logincustid&&null!==logincustid&&""!==logincustid?logincustid:null;return model.init=function(){return model.pageload(),model},model.pageload=function(){editPropertyService.getPropertyData(custID).then(function(response){model.propertyArr=response.data,model.propertymodifiedby=model.propertyArr.length>0&&void 0!==model.propertyArr[0].EmpLastModificationDate&&null!==model.propertyArr[0].EmpLastModificationDate?model.propertyArr[0].EmpLastModificationDate:""})},model.populateProperty=function(item){isSubmit=!0,model.proObj={},model.proObj.Custpropertyid=null,void 0!==item&&(model.proObj.Custpropertyid=item.Custpropertyid,model.proObj.ddlFamilyStatus=item.FamilyValuesID,model.proObj.rdlSharedProperty=item.SharedPropertyID===!0?1:0,model.proObj.txtValueofproperty=item.PropertyValue,model.proObj.txtPropertydesc=item.PropertyDetails),commonFactory.open("propertyContent.html",model.scope,uibModal)},model.propertySubmit=function(obj){isSubmit&&(isSubmit=!1,model.propertyData={GetDetails:{FamilyStatus:obj.ddlFamilyStatus,Issharedproperty:obj.rdlSharedProperty,Valueofproperty:obj.txtValueofproperty,PropertyType:"281",Propertydescription:obj.txtPropertydesc,Showingviewprofile:obj.rbtShowViewProfile,Custpropertyid:model.proObj.Custpropertyid,PropertyID:model.proObj.Custpropertyid,CustId:custID},customerpersonaldetails:{intCusID:custID,EmpID:null,Admin:null}},model.submitPromise=editPropertyService.submitPropertyData(model.propertyData).then(function(response){console.log(response),commonFactory.closepopup(),1===response.data?(editPropertyService.getPropertyData(custID).then(function(response){model.propertyArr=response.data}),alertss.timeoutoldalerts(model.scope,"alert-success","submitted Succesfully",4500)):alertss.timeoutoldalerts(model.scope,"alert-danger","Updation failed",4500)}))},model.cancel=function(){commonFactory.closepopup()},model.init()}angular.module("KaakateeyaEmpEdit").factory("editPropertyModel",factory),factory.$inject=["editPropertyService","authSvc","alert","commonFactory","$uibModal"]}(angular),function(angular){"use strict";function factory(http){return{getPropertyData:function(obj){return http.get(editviewapp.apipath+"CustomerPersonal/getPropertyDetailsDisplay",{params:{CustID:obj}})},submitPropertyData:function(obj1){return http.post(editviewapp.apipath+"CustomerPersonalUpdate/CustomerPropertyUpdatedetails",JSON.stringify(obj1))}}}angular.module("KaakateeyaEmpEdit").factory("editPropertyService",factory),factory.$inject=["$http"]}(angular);